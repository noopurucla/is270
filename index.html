// Function to make the API request with parameters
function fetchListings() {
    const authToken = 'hhPhUd8ytuF0tAg3bCc1YTylm2mrlHLCpRXpH3nPYmGlV876AKcvN33R';
    const startDate = '2024-02-27';
    const endDate = '2024-03-15';
    
    // Construct the URL with parameters
    const apiUrl = `zeitgeists.org/api/v1/?startDate=${startDate}&endDate=${endDate}`;

    // Make a GET request to the API endpoint with parameters and authentication token in headers
    fetch(apiUrl, {
        headers: {
            'Authorization': `Bearer ${authToken}`
        }
    })
    .then(response => {
        // Check if the response is successful
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        // Check content type
        const contentType = response.headers.get('content-type');
        if (!contentType || !contentType.includes('application/json')) {
            throw new Error('Unexpected response type');
        }
        // Parse the JSON response
        return response.json();
    })
    .then(data => {
        // Process the response data and display it
        displayListings(data);
    })
    .catch(error => {
        // Display any errors that occurred
        console.error('Error:', error);
        document.getElementById('listings').textContent = 'Error: ' + error.message;
    });
}
